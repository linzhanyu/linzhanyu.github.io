---
layout: post
title: Linux 硬盘操作
categories: [linux]
tags: [linux]
fullview: false
comments: true
---

### 查看磁盘情况

{% highlight shell %}
lsblk
{% endhighlight %}

### 查看分区

{% highlight shell %}
所有磁盘：sudo fdisk -l
        ：sudo parted -l
指定磁盘：sudo fdisk -l /dev/sda
{% endhighlight %}

### MBR 分区

{% highlight shell %}
> sudo parted /dev/sdb
> mklable mbr
> mkpart
> mkpart name startMB endMB # 建立分区
{% endhighlight %}

### GPT 分区

{% highlight shell %}
# sudo parted /dev/sdb
> mklable gpt
> mkpart
{% endhighlight %}


### 格式化

{% highlight shell %}
mkfs.ext4  /dev/sdXN
mkfs.btrfs
mkfs.vfat
mkfs.ntfs
{% endhighlight %}


### 挂载

{% highlight shell %}
{% endhighlight %}


#### /etc/fstab 格式

{% highlight shell %}
# <file system> <mount point>   <type>  <options>       <dump>  <pass>
UUID=25c15e03-dbca-4da4-bba9-73f168f28adf /mnt/disk        ext4    acl,async,noatime,user_xattr  0       2
UUID=82928471AA8BFC78		          /mnt/data       ntfs-3g auto,user,noexec,async,noatime,users,uid=1000,gid=users,umask=133,dmask=022,locale=zh_CN.UTF-8 0 0
{% endhighlight %}


#### SSD 性能优化

{% highlight shell %}
btrfs : ssd,noatime,discard
ext4  : noatime,discard
{% endhighlight %}


#### SMB 共享挂载

{% highlight shell %}
{% endhighlight %}


### 坏道修复

{% highlight shell %}
检查：smartctl -l selftest /dev/sda
卸载：umount /dev/sda*
检查：badblocks /dev/sda
修复：fsck -t ext4 -y /dev/sda
{% endhighlight %}

